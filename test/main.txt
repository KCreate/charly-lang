let run = func onlyTrueWasPassed() {
    let value = true;

    func callback(bool, method) {
        if (method == "test") {
            if (bool ! true) {
                value = false;
            };
        } else if (method == "result") {
            if (value) {0;} else {1;};
        };
    };
    callback;
}();



# Test variable assignment
let a = 25;
run(test(a, 25, "Variable Assignment"), "test");



# Test string comparisons
let a = "Hello";
run(test(a, "Hello", "String comparison"), "test");



# Test function scoping
let name = "Leonard";
let age = 16;
func something(name) {
    name = "Peter";
    age = 20;
};
something(name);
run(test(name, "Leonard", "Function arguments in own scope"), "test");
run(test(age, 20, "Access to definition scope"), "test");



# Check comparison operators
run(test(2 < 5, true, "Smaller than"), "test");
run(test(2 > 5, false, "Smaller than negated"), "test");

run(test(5 > 2, true, "Greater than"), "test");
run(test(5 < 2, false, "Greater than negated"), "test");

run(test(5 <= 5, true, "Smaller or equal than"), "test");
run(test(10 <= 5, false, "Smaller or equal than negated"), "test");

run(test(10 >= 5, true, "Greater or equal than"), "test");
run(test(2 >= 5, false, "Greater or equal than negated"), "test");

run(test(20 == 20, true, "Equal than"), "test");
run(test(20 == 10, false, "Equal than negated"), "test");

run(test(20 ! 10, true, "Not Equal than"), "test");
run(test(20 ! 20, false, "Not Equal than negated"), "test");



# Check binary operators
run(test(2 + 5, 7, "Addition"), "test");
run(test(10 - 5, 5, "Subtraction"), "test");
run(test(10 * 5, 50, "Multiplication"), "test");
run(test(100 / 4, 25, "Division"), "test");
run(test(10 % 3, 1, "Modulus"), "test");
run(test(2 ** 5, 32, "Exponential"), "test");



# Test while loop
let i = 0;
while (i < 50) {
    i = i + 1;
};
run(test(i, 50, "While loop"), "test");

# Test the repeat function
let repeatCount = 0;
repeat(100, func callback(index) {
    repeatCount = repeatCount + 1;
});
run(test(repeatCount, 100, "Repeat function"), "test");

# Test the range function
let last_index = -1;
range(100, 150, func callback(i) {
    last_index = i;
});
run(test(last_index, 149, "Range function"), "test");



# Test different scoping scenarios and rules
let value = 0;
func test_functionscope(callback) {
    let value = 0;
    callback();
    run(test(value, 0, "Function scope"), "test");
};
test_functionscope(func callback() {
    value = value + 5;
});
run(test(value, 5, "Global scope"), "test");




# Script exit code
if (run(0, "result") == 0) {
    print("Test suite passed!");
} else {
    print("Test suite failed!");
};
run(0, "result");
